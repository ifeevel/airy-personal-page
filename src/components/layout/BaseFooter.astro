---
/**
 * BaseFooter.astro
 * 基础页脚组件
 *
 * 结构：
 * - 左侧：版权信息
 * - 右侧：技术支持信息
 * 数据：
 * - getSiteConfig: 获取网站配置
 * - currentYear: 当前年份
 */

import { getSiteConfig } from "@utils/config";

const { site: siteConfig } = await getSiteConfig();
const currentYear = new Date().getFullYear();
---

<footer class="site-footer">
    <!-- 左侧页脚：内容区 -->
    <div class="site-footer__left">
        <a href="/">
            © {
                !siteConfig.startYear || siteConfig.startYear === currentYear
                    ? currentYear
                    : `${siteConfig.startYear}-${currentYear}`
            }
        </a>
    </div>

    <!-- 右侧页脚：内容区 -->
    <div class="site-footer__right">
        <div class="footer-powered">
            Built with
            <a href="https://astro.build" target="_blank" rel="noopener noreferrer" class="astro-link"
                >Astro</a
            >
            <span>•</span>
            Powered by
            <a
                href="https://cloudflare.com" target="_blank" rel="noopener noreferrer" class="cloudflare-link"
                >Cloudflare</a
            >
        </div>
    </div>
</footer>

<style>
    /* 底部页脚容器 */
    .site-footer {
        background: var(--bg-footer);
        padding: 1.25rem 3.125rem;
        font-size: 0.75rem;
        color: var(--text-secondary);
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        width: 100%;
        clear: both;
    }

    /* 
     * 分栏布局适配：
     * 当页面使用 .split-layout 时，页脚在桌面端需要避开固定的左侧栏。
     */
    @media (min-width: 48rem) {
        :global(body:has(.split-layout)) .site-footer {
            margin-left: var(--split-ratio, 50%);
            width: calc(100% - var(--split-ratio, 50%));
        }
    }

    /* 基础链接样式 */
    .site-footer a {
        color: var(--text-secondary);
        text-decoration: none;
        font-weight: 600;
        transition: color 0.2s var(--bezier);
    }

    /* 页脚左侧：版权信息 */
    .site-footer__left {
        flex: 1;
    }

    .site-footer__left a {
        color: inherit;
    }

    .site-footer__left a:hover {
        color: var(--text-primary);
    }

    .site-footer__left p {
        margin: 0;
        color: var(--text-secondary);
    }

    .site-footer__left p span {
        margin-right: 0.3125rem;
    }

    /* 页脚右侧：技术支持 */
    .site-footer__right {
        text-align: right;
        flex-shrink: 0;
    }

    .footer-powered {
        display: block;
    }

    .footer-powered a {
        color: inherit;
    }

    /* 品牌色悬停效果 */
    .footer-powered a.astro-link:hover {
        color: #bc52ee;
    }
    .footer-powered a.cloudflare-link:hover {
        color: #f38020;
    }

    /* 分隔符间距 - 左右各 0.25rem (4px) */
    .footer-powered span {
        margin: 0 0.25rem;
    }

    /* 响应式：移动端堆叠显示 */
    @media (max-width: 48rem) {
        .site-footer {
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 0.625rem;
            padding: 1.25rem 1rem;
        }

        .site-footer__left,
        .site-footer__right {
            width: 100%;
            text-align: center;
        }
    }
</style>
